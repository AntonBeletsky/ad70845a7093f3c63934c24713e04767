!function(l,d,c){var p,u,g,n,f;function h(){var t=new Date,e=Math.floor(899999*Math.random())+1e5;return t.getTime()+"."+e}function m(t){var e,a=d.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));try{e=decodeURIComponent(a[1])}catch(t){e=void 0}return a?e:void 0}function w(t,e,a){var i,o=(a=a||{}).expires;"number"==typeof o&&o&&((i=new Date).setTime(i.getTime()+1e3*o),o=a.expires=i),o&&o.toUTCString&&(a.expires=o.toUTCString());var n,r=t+"="+(e=encodeURIComponent(e));for(n in a){r+="; "+n;var s=a[n];!0!==s&&(r+="="+s)}document.cookie=r}c?(l.tilda_stat_callbacks&&l.tilda_stat_callbacks.length,p={},u=m("tildauid"),g=m("tildasid"),n={p10:0,p25:0,p50:0,p75:0,p90:0},new Date,f=!0,l.onVisibilityWindowChange=function(t){var e=!0;if(!t)throw new Error("no callback given");function a(){e||t(e=!0)}function i(){e&&t(e=!1)}try{"hidden"in document&&document.addEventListener("visibilitychange",function(){(document.hidden?i:a)()}),"mozHidden"in document&&document.addEventListener("mozvisibilitychange",function(){(document.mozHidden?i:a)()}),"webkitHidden"in document&&document.addEventListener("webkitvisibilitychange",function(){(document.webkitHidden?i:a)()}),"msHidden"in document&&document.addEventListener("msvisibilitychange",function(){(document.msHidden?i:a)()}),"onfocusin"in document&&(document.onfocusin=a,document.onfocusout=i),window.onpageshow=window.onfocus=a,window.onpagehide=window.onblur=i}catch(t){}},l.tildastat_scrollEvent=function(){var t=c(document).scrollTop(),e=c(window).height(),a=c(document).height(),i=0,o=0;new Date;if(f=!0,0<c("#t-header").length&&(i=c("#t-header").height()),0<c("#t-footer").length&&(o=c("#t-footer").height()),!((o=parseInt(100*(t-i+e)/(a-i-o)))<10))if(10<=o&&!n.p10)p.page="/tilda/scroll/10/",l.tildastat("pageview"),n.p10=!0;else{if(24<=o){if(0==n.p25)return p.page="/tilda/scroll/25/",l.tildastat("pageview"),void(n.p25=l.setTimeout(function(){l.clearTimeout(n.p25),n.p25=-1},5e3));if(o<51&&-1==n.p25)return void(n.p25=0)}if(49<=o){if(0==n.p50)return p.page="/tilda/scroll/50/",l.tildastat("pageview"),void(n.p50=l.setTimeout(function(){l.clearTimeout(n.p50),n.p50=-1},5e3));if(o<76&&-1==n.p50)return void(n.p50=0)}if(74<=o){if(0==n.p75)return p.page="/tilda/scroll/75/",l.tildastat("pageview"),void(n.p75=l.setTimeout(function(){l.clearTimeout(n.p75),n.p75=-1},5e3));if(o<91&&-1==n.p75)return void(n.p75=0)}89<=o&&(0==n.p90?(p.page="/tilda/scroll/90/",l.tildastat("pageview"),n.p90=l.setTimeout(function(){l.clearTimeout(n.p90),n.p90=-1},5e3)):-1==n.p90&&(n.p90=0))}},l.tildastat=function(t,e){var a;if(!t)return!1;switch(e&&c.extend(p,e),u=u||h(),g=g||h(),t){case"create":"www."==(a=l.location.hostname).substring(0,4)&&(a=a.substring(4));try{a.lastIndexOf(".")==a.length-1&&(a=a.slice(0,-1))}catch(t){}p.page=a+l.location.pathname,p.referrer=d.referrer||"",p.userid=u,p.sessionid=g,p.user_agent=l.navigator.userAgent,p.user_language=l.navigator.userLanguage||l.navigator.language,p.projectid=c("#allrecords").data("tilda-project-id")||"0",p.pageid=c("#allrecords").data("tilda-page-id")||"0",p.pagealias=c("#allrecords").data("tilda-page-alias")||"",p.formskey=c("#allrecords").data("tilda-formskey")||"",p.params={},(void 0===l.tildastatscroll||"yes"!=l.tildastatscroll&&"no"!=l.tildastatscroll)&&(l.tildastatscroll="yes"==c("#allrecords").data("tilda-statscroll")?"yes":"no");try{a=decodeURIComponent(l.location.search)}catch(t){a=l.location.search}if("?"<a&&(p.pagequery=a.substring(1).toLowerCase(),-1!=p.pagequery.indexOf("utm_"))){var i,o,n=p.pagequery.split("&");for(i in n)n[i]&&(1<(o=n[i].split("=")).length?"utm_referrer"!=o[0]||p.referrer&&-1==p.referrer.indexOf("ohio8.v")?p.params[o[0]]=o[1]:p.referrer=o[1]:p.params[o[0]]="")}var r=!1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(r=!0),p.ismobile=r,1==c("#tildastatscript").length&&(p.tildastatcode=c("#tildastatscript").get(0).key);var s=new Date;try{l.tildaStat_UserExpiriesDays&&0<l.tildaStat_UserExpiriesDays?s.setDate(s.getDate()+parseInt(l.tildaStat_UserExpiriesDays)):s.setDate(s.getDate()+90)}catch(t){s.setDate(s.getDate()+90)}if(w("tildauid",u,{expires:s,path:"/"}),w("tildasid",g,{expires:1800,path:"/"}),"yes"==l.tildastatscroll)try{l.onVisibilityWindowChange(function(t){f=!!t}),c("body").on("mousewheel, mousemove",t_throttle(function(){f=!0},1e3)),c("body").on("keypress",t_throttle(function(){f=!0},1e3)),c("body").on("click",t_throttle(function(){f=!0},1e3))}catch(t){}break;case"pageview":if(!p.page){console.log("TildaStat: page empty"),"www."==(a=l.location.hostname).substring(0,4)&&(a=a.substring(4));try{a.lastIndexOf(".")==a.length-1&&(a=a.slice(0,-1))}catch(t){}p.page=a+l.location.pathname,l.location.hash&&0==l.location.hash.indexOf("#!")&&(p.page+=l.location.hash)}if("http:"!=window.location.protocol&&"https:"!=window.location.protocol)return console.log("TildaStat: cannot work on local page"),!1;if(sessid=m("tildasid")||"",sessid!=p.sessionid&&w("tildasid",p.sessionid,{expires:1800,path:"/"}),p.tildautm=m("TILDAUTM")||"",""==p.referrer&&(p.referrer=m("previousUrl")||""),"/"==p.page.substring(0,1)&&(p.page=l.location.hostname+p.page),""<p.user_agent&&-1!=p.user_agent.indexOf("bot"))break;c.ajax({type:"POST",url:"https://stat.tildacdn.com/event/",data:p,dataType:"text",xhrFields:{withCredentials:!1},success:function(t){},error:function(t){console.log("TildaStat: fail pageview"),console.log(t)},timeout:3e3}),p.page&&-1==p.page.indexOf("tilda/scroll")&&-1==p.page.indexOf("tilda/readtime")&&-1==p.page.indexOf("tilda/click")&&(p.referrer=p.page,w("previousUrl",p.page,{path:"/",expires:1800})),p.page="",l.tildastatload=!0;break;case"readtime":try{"yes"==l.tildastatscroll&&(f&&(p.page="/tilda/readtime/",f=!1,l.tildastat("pageview")),l.setTimeout(function(){l.tildastat("readtime")},15e3))}catch(t){}break;case"scroll":try{"yes"==l.tildastatscroll&&c(l).on("scroll",t_throttle(l.tildastat_scrollEvent,500))}catch(t){}}},l.tildastat("create"),l.setTimeout(function(){l.tildastat("pageview"),l.tildastat("readtime"),l.tildastat("scroll")},2e3)):conole.log("jquery not initialized")}(window,document,jQuery);
